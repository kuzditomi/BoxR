@model BoxR.Web.Models.RegisterExternalLoginModel
@section scripts{
    <script>
        $(function() {
            var $backbutton = $('#backbutton');
            if ($backbutton) {
                $backbutton.on('click', function() {
                    history.back();
                });
                $backbutton.show();
            }
        });
    </script>
}
<div class="span8">
    <div class="row text-centered">
        <div class="span4">
            <img src="/Images/header_widelogo.png" alt="BoxR">
        </div>
    </div>
    <div class="row">
        <div class="span8">
            <h2>Associate your @ViewBag.ProviderDisplayName account.</h2>
            <div class="form-horizontal well">
                <div class="row">
                    <p class="help-inline">You've successfully authenticated with <strong>@ViewBag.ProviderDisplayName</strong>. Please enter a user name for this site below and click the Confirm button to finish logging in.</p>
                    <div class="span8">
                        @using (Html.BeginForm("ExternalLoginConfirmation", "Account", new { ReturnUrl = ViewBag.ReturnUrl }))
                        {
                            @Html.AntiForgeryToken()
                            @Html.HiddenFor(m => m.ExternalLoginData)
                            <div class="control-group error">
                                @if (ViewData.ModelState.ContainsKey("UserName"))
                                {
                                    foreach (var error in ViewData.ModelState[""].Errors)
                                    {
                                        <span class="errorMsg">@error.ErrorMessage</span>
                                    }
                                }
                            </div>
                            <div class="control-group @(ViewData.ModelState.ContainsKey("LoginUserName") && ViewData.ModelState["LoginUserName"].Errors.Any() ? "error" : "")">
                                @Html.LabelFor(m => m.UserName, new { @class = "control-label", @for = "username" })
                                <div class="controls">
                                    @Html.TextBoxFor(m => m.UserName, new { @class = "input-large focused username", id = "username" })
                                    <input type="submit" value="Confirm" class="btn btn-small"/>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
 </div>

@*<section class="centersection" >
    <table>
        <tr>
            <td>
                <div class="logincred">
                    <h1>BoxR</h1>
                    <h2>Associate your @ViewBag.ProviderDisplayName account.</h2>
                    @using (Html.BeginForm("ExternalLoginConfirmation", "Account", new { ReturnUrl = ViewBag.ReturnUrl }))
                    {
                        @Html.AntiForgeryToken()
                        <table>
                            <tr>
                                <td colspan="2">
                                    <p>
                                        You've successfully authenticated with <strong>@ViewBag.ProviderDisplayName</strong>.
                                        Please enter a user name for this site below and click the Confirm button to finish
                                        logging in.
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>@Html.LabelFor(m => m.UserName)</td>
                                <td> @Html.TextBoxFor(m => m.UserName, new { @class = "username" })</td>
                            </tr>
                            <tr>
                                <td>@Html.ActionLink("Back to login", "Login", null, new { @class = "btn" })</td>
                                <td><input type="submit" value="Register" class="btn"/></td>
                            </tr>
                        </table>
                        <div>
                            @Html.ValidationSummary(true)
                            @Html.HiddenFor(m => m.ExternalLoginData)
                        </div>
                    }
                </div>
            </td>
        </tr>
    </table>
</section>*@


@*@using (Html.BeginForm("ExternalLoginConfirmation", "Account", new { ReturnUrl = ViewBag.ReturnUrl })) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Association Form</legend>
        <p>
            You've successfully authenticated with <strong>@ViewBag.ProviderDisplayName</strong>.
            Please enter a user name for this site below and click the Confirm button to finish
            logging in.
        </p>
        <ol>
            <li class="name">
                @Html.LabelFor(m => m.UserName)
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </li>
        </ol>
        @Html.HiddenFor(m => m.ExternalLoginData)
        <input type="submit" value="Register" />
    </fieldset>
}*@
